paths:
  /v1/user:
    post:
      tags:
        - User
      summary: Add a new user
      description: Creates a new user with the provided name, email, and password. Requires API key authentication.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddUserRequest"
            example:
              name: "John Doe"
              email: "john.doe@example.com"
              password: "securePassword123"
      responses:
        "200":
          description: User added successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AddUserResponse"
              example:
                message: "User added successfully!"
                data:
                  user:
                    id: "550e8400-e29b-41d4-a716-446655440000"
                    name: "John Doe"
                    email: "john.doe@example.com"
                    password: "securePassword123"
                    createdAt: "2026-01-08T10:00:00.000Z"
                    updatedAt: "2026-01-08T10:00:00.000Z"
                success: true
        "400":
          description: Bad request - Invalid parameters or user already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalidParams:
                  value:
                    message: "Invalid params: name, email, password are required."
                    success: false
                userExists:
                  value:
                    message: "User already exists."
                    success: false
        "401":
          description: Unauthorized - Missing or invalid API key
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                message: "Unauthorized"
                success: false
        "500":
          description: Internal server error - Failed to add user
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                message: "Failed to add user."
                success: false

components:
  schemas:
    AddUserRequest:
      type: object
      required:
        - name
        - email
        - password
      properties:
        name:
          type: string
          description: User's full name
          example: "John Doe"
        email:
          type: string
          format: email
          description: User's email address (must be unique)
          example: "john.doe@example.com"
        password:
          type: string
          format: password
          description: User's password
          example: "securePassword123"

    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique user identifier
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: string
          description: User's full name
          example: "John Doe"
        email:
          type: string
          format: email
          description: User's email address
          example: "john.doe@example.com"
        password:
          type: string
          description: User's password (hashed in production)
          example: "securePassword123"
        createdAt:
          type: string
          format: date-time
          description: User creation timestamp
          example: "2026-01-08T10:00:00.000Z"
        updatedAt:
          type: string
          format: date-time
          description: User last update timestamp
          example: "2026-01-08T10:00:00.000Z"

    AddUserResponse:
      type: object
      properties:
        message:
          type: string
          example: "User added successfully!"
        data:
          type: object
          properties:
            user:
              $ref: "#/components/schemas/User"
        success:
          type: boolean
          example: true

    ErrorResponse:
      type: object
      properties:
        message:
          type: string
          description: Error message
        success:
          type: boolean
          example: false
